<section class="mailbox-container">
  <h4>Mailbox</h4>
  <a href="/#/mailbox" data-activates="slide-out" class="btn button-collapse">Send a private message</a>
  <ul id="slide-out" class="side-nav">
    <form ng-submit="sendMessage()">
      <!--  Destination   -->
      <div class="row">
       <div class="col s12">
         <div class="row">
           <div class="input-field col s12">
             <input type="text" id="autocomplete-input" class="autocomplete" ng-model="destination">
             <label for="autocomplete-input">Destination</label>
           </div>
         </div>
       </div>
      </div>

      <!--  Message Content   -->
      <div class="row">
          <div class="input-field col s12">
            <textarea id="textarea1" class="materialize-textarea" length="120" ng-model="content"></textarea>
            <label for="textarea1">Message</label>
          </div>
      </div>

      <div class="row">
        <div class="input-field col s12">
          <button type="submit" class="btn waves-effect waves-light" type="submit" name="action">
            Submit
            <i class="material-icons right">send</i>
          </button>
        </div>
      </div>
    </form>
  </ul>

  <ul class="collection">
    <li class="collection-item avatar grey" ng-repeat="privateMessage in privateMessages" ng-class="{'lighten-4': privateMessage.source._id === $parent.user._id}">
      <span class="title"><a href="/#/profile/{{ privateMessage.source._id }}">{{ privateMessage.source.username }}</a> to <a href="/#/profile/{{ privateMessage.destination._id }}">{{ privateMessage.destination.username }}</a></span>
      <p>
        {{ privateMessage.content }}
      </p>
      <a ng-hide="privateMessages.readed || privateMessage.source._id === $parent.user._id" class="secondary-content"><i class="material-icons">grade</i></a>
    </li>
  </ul>

</section>
